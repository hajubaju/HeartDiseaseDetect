<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart Disease Predictor</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f4f7f6; }
        .container { max-width: 600px; margin: auto; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #2c3e50; }
        label { display: block; margin: 10px 0 5px; font-weight: bold; }
        input { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; }
        button { background: #3498db; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
        button:hover { background: #2980b9; }
        .result { margin-top: 20px; padding: 15px; border-radius: 5px; font-size: 18px; text-align: center; }
        .positive { background: #e74c3c; color: white; }
        .negative { background: #27ae60; color: white; }
        .details { margin-top: 20px; padding: 15px; background: #ecf0f1; border-radius: 5px; white-space: pre-wrap; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Heart Disease Prediction</h1>
        <form method="POST">
            <label>Age</label>
            <input type="number" name="age" placeholder="e.g., 55" required>

            <label>Sex (1 = Male, 0 = Female)</label>
            <input type="number" name="sex" min="0" max="1" placeholder="1 or 0" required>

            <label>Chest Pain Type (0-3)</label>
            <input type="number" name="cp" min="0" max="3" placeholder="0-3" required>

            <label>Resting Blood Pressure (mm Hg)</label>
            <input type="number" name="trestbps" placeholder="e.g., 130" required>

            <label>Cholesterol (mg/dl)</label>
            <input type="number" name="chol" placeholder="e.g., 240" required>

            <label>Fasting Blood Sugar >120 mg/dl (1 = Yes, 0 = No)</label>
            <input type="number" name="fbs" min="0" max="1" placeholder="1 or 0" required>

            <label>Resting ECG (0-2)</label>
            <input type="number" name="restecg" min="0" max="2" placeholder="0-2" required>

            <label>Max Heart Rate Achieved</label>
            <input type="number" name="thalach" placeholder="e.g., 150" required>

            <label>Exercise Induced Angina (1 = Yes, 0 = No)</label>
            <input type="number" name="exang" min="0" max="1" placeholder="1 or 0" required>

            <label>ST Depression (oldpeak)</label>
            <input type="number" step="0.1" name="oldpeak" placeholder="e.g., 2.3" required>

            <label>Slope of Peak Exercise ST (0-2)</label>
            <input type="number" name="slope" min="0" max="2" placeholder="0-2" required>

            <label>Number of Major Vessels (0-3)</label>
            <input type="number" name="ca" min="0" max="3" placeholder="0-3" required>

            <label>Thalassemia (3=normal, 6=fixed, 7=reversible)</label>
            <input type="number" name="thal" min="3" max="7" placeholder="3,6,7" required>

            <button type="submit">Predict Heart Disease</button>
        </form>

        {% if result %}
        <div class="result {{ 'positive' if result == 'Heart Disease' else 'negative' }}">
            <strong>Prediction: {{ result }}</strong>
        </div>
        {% endif %}

        {% if details %}
        <div class="details">
            <h3>AI Analysis (Gemini):</h3>
            {{ details | safe }}
        </div>
        {% endif %}
    </div>
</body>
</html>